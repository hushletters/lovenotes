<!doctype html>
<html lang="no">
<head>
  <meta charset="utf-8"/>
  <title>Våre hemmelige love-notes</title>
  <style>
    body{font-family:system-ui;background:#fff0f5;margin:0;padding:2rem;display:flex;flex-direction:column;align-items:center}
    #lock, #app{width:100%;max-width:420px}
    input[type=password]{width:100%;padding:.6rem;font-size:1rem;border:1px solid #ffb6c1;border-radius:8px}
    button{padding:.6rem 1.4rem;margin-top:1rem;font-size:1rem;background:#ff69b4;color:#fff;border:none;border-radius:8px;cursor:pointer}
    textarea{width:100%;height:120px;font-size:1.1rem;padding:.6rem;border:1px solid #ffb6c1;border-radius:8px;resize:vertical}
    #card{background:#fff;border:1px solid #ffb6c1;border-radius:12px;padding:1.4rem 1.8rem;margin:1rem 0;box-shadow:0 4px 12px rgba(0,0,0,.08)}
    #card p{margin:0;font-size:1.2rem;line-height:1.4}
    #card small{display:block;margin-top:.6rem;color:#888}
    .hide{display:none}
  </style>
</head>
<body>

  <!-- PASSORD-SKJERM -->
  <div id="lock">
    <h1>Hei, elskling ❤️</h1>
    <input id="pwd" type="password" placeholder="Skriv passordet vårt"/>
    <button onclick="unlock()">Kom inn</button>
  </div>

  <!-- SELVE APPEN (skjult til passord er riktig) -->
  <div id="app" class="hide">
    
  <!-- DAG-TELLER -->
<h2 id="dayCounter" style="margin:0 0 1rem;color:#d63384">Dager sammen: 0</h2>

<!-- SETT DATO (vises bare første gang) -->
<div id="dateSetter" class="hide" style="margin-bottom:1.2rem">
  <label>Når møttes vi første gang?
    <input id="firstDate" type="date">
  </label>
  <button onclick="setFirstDay()">Lagre dato</button>
</div>
    <h1>Skriv en liten love-note</h1>
    <textarea id="noteBox" placeholder="Noe kjærlig…"></textarea>
    <button onclick="saveNote()">Lagre</button>

    <h2 style="margin-top:2rem">Eller få en tilfeldig note</h2>
    <div id="card">Trykk knappen under for å få en lapp!</div>
    <button onclick="showRandom()">Gi meg en ny</button>
  </div>

<script>
  const PASS = 'kaffe123';                     // deres hemmelige ord

  /* ----------  DAG-TELLER  ---------- */
  function setFirstDay(){
    const raw = document.getElementById('firstDate').value; // åååå-mm-dd
    if(!raw) return alert('Velg en dato først');
    localStorage.setItem('firstDay', raw);
    renderDays();
  }
  function renderDays(){
    const first = localStorage.getItem('firstDay');
    if(!first) return;                         // ikke satt enda
    const diff = Math.floor((Date.now() - new Date(first)) / 86400000); // ms → dager
    document.getElementById('dayCounter').textContent = `Dager sammen: ${diff}`;
  }
  function askFirstDayOnce(){
    if(!localStorage.getItem('firstDay')){
      document.getElementById('dateSetter').classList.remove('hide');
    } else {
      renderDays();
    }
  }

  /* ----------  LÅS & APP  ---------- */
  function unlock(){
    if(document.getElementById('pwd').value === PASS){
      document.getElementById('lock').classList.add('hide');
      document.getElementById('app').classList.remove('hide');
      askFirstDayOnce();   // vis dato-spørsmål hvis første gang
      showRandom();        // vis en lapp
    } else {
      alert('Feil passord, prøv igjen ❤️');
    }
  }

  /* ----------  NOTES  ---------- */
  function saveNote(){
    const text = document.getElementById('noteBox').value.trim();
    if(!text) return alert('Tom lapp, skriv noe søtt!');
    const notes = JSON.parse(localStorage.getItem('ln') || '[]');
    notes.push({txt:text, date:Date.now()});
    localStorage.setItem('ln', JSON.stringify(notes));
    document.getElementById('noteBox').value = '';
    alert('Lagret! ❤️');
  }
  function showRandom(){
    const notes = JSON.parse(localStorage.getItem('ln') || '[]');
    if(!notes.length) return document.getElementById('card').innerHTML = 'Ingen lapper enda – skriv den første!';
    const pick = notes[Math.floor(Math.random()*notes.length)];
    const date = new Date(pick.date).toLocaleString('no-NO');
    document.getElementById('card').innerHTML = `<p>${pick.txt}</p><small>${date}</small>`;
  }
</script>
</body>
</html>
